(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5654e7ad"],{"11e9":function(t,e,n){var i=n("52a7"),a=n("4630"),o=n("6821"),s=n("6a99"),l=n("69a8"),r=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=o(t),e=s(e,!0),r)try{return u(t,e)}catch(n){}if(l(t,e))return a(!i.f.call(t,e),t[e])}},"25f8":function(t,e,n){},"31a0":function(t,e,n){},"333d":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[n("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},a=[];n("c5f6");Math.easeInOutQuad=function(t,e,n,i){return t/=i/2,t<1?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e)};var o=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function s(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function l(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(t,e,n){var i=l(),a=t-i,r=20,u=0;e="undefined"===typeof e?500:e;var c=function t(){u+=r;var l=Math.easeInOutQuad(u,i,a,e);s(l),u<e?o(t):n&&"function"===typeof n&&n()};c()}var u={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[6,10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&r(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&r(0,800)}}},c=u,d=(n("35d2"),n("2877")),p=Object(d["a"])(c,i,a,!1,null,"820c5f22",null);e["a"]=p.exports},"35d2":function(t,e,n){"use strict";var i=n("a38a"),a=n.n(i);a.a},"386d":function(t,e,n){"use strict";var i=n("cb7c"),a=n("83a1"),o=n("5f1b");n("214f")("search",1,(function(t,e,n,s){return[function(n){var i=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,i):new RegExp(n)[e](String(i))},function(t){var e=s(n,t,this);if(e.done)return e.value;var l=i(t),r=String(this),u=l.lastIndex;a(u,0)||(l.lastIndex=0);var c=o(l,r);return a(l.lastIndex,u)||(l.lastIndex=u),null===c?-1:c.index}]}))},"51ea":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-wrapper"},[n("plugin-navbar"),t._v(" "),n("plugin-list")],1)},a=[];n("b775");var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-main-content",staticStyle:{margin:"10px",background:"#fff"}},[n("div",{staticClass:"filter-container"},[n("el-row",[n("el-col",{staticClass:"advanced-search-groups",attrs:{xs:24,sm:12,md:8,lg:8,xl:8}},[t._v("\n        插件名称/描述：\n        "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"插件名称/描述",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSeach()}},model:{value:t.searchName,callback:function(e){t.searchName="string"===typeof e?e.trim():e},expression:"searchName"}})],1),t._v(" "),n("el-col",{staticClass:"advanced-search-groups",attrs:{xs:24,sm:12,md:6,lg:6,xl:6}},[t._v("\n        插件状态：\n        "),n("el-select",{staticClass:"filter-item",attrs:{placeholder:"插件状态"},on:{change:function(e){return t.handleFilterInit()}},model:{value:t.searchStatus,callback:function(e){t.searchStatus=e},expression:"searchStatus"}},[n("el-option",{attrs:{label:"全部",value:"全部"}}),t._v(" "),"local"!==t.tabName?n("el-option",{attrs:{label:"下载",value:"下载"}}):t._e(),t._v(" "),n("el-option",{attrs:{label:"更新",value:"更新"}})],1)],1),t._v(" "),n("el-col",{staticClass:"advanced-search-operations",attrs:{align:"right",xs:24,sm:24,md:24,lg:24,xl:24}},[n("el-button",{staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){return t.getList()}}},[t._v("搜索")])],1)],1)],1),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{height:"100%"},attrs:{"element-loading-background":"#FFFFFF"}},[n("div",{staticStyle:{position:"relative",display:"inline-block",width:"100%"}},t._l(t.list,(function(e){return n("div",{key:e.plugin_id,staticClass:"card-panel",staticStyle:{"margin-top":"1%",width:"48.5%",float:"left","margin-left":"1%",height:"180px"},attrs:{id:e.plugin_id}},[n("el-card",{attrs:{"body-style":{padding:"0px",height:"100%"},shadow:"never"}},["nodejs"===e.language?n("svg",{staticClass:"icon",staticStyle:{float:"right",margin:"14px 10px 0px 0px"},attrs:{t:"1565963200375",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4393",width:"46",height:"46"}},[n("path",{attrs:{d:"M875.2 262.3L546.7 72.7c-20.7-11.8-48.3-11.8-69 0L148.8 262.3c-21.5 12.2-34.5 34.9-34.5 59.7v379.2c0 24.8 13.4 47.9 34.5 60.1l86.1 49.5c41.8 20.7 56.8 20.7 75.9 20.7 62.1 0 97.4-37.8 97.4-102.7V354.4c0-5.3-4.1-9.3-9.3-9.3h-41.4c-5.3 0-9.3 4.1-9.3 9.3v374.3c0 28.8-30 57.7-78.8 33.3l-90.1-52c-3.2-2-5.3-5.3-5.3-8.9V321.9c0-3.7 2-7.3 5.3-8.9l328.1-190c3.2-1.6 7.3-1.6 10.2 0l328.5 189.6c3.2 1.6 5.3 5.3 5.3 8.9v379.2c0 3.7-2 7.3-4.9 8.9L517.9 899.3c-2.8 1.6-7.3 1.6-10.2 0l-84.4-49.9c-2.4-1.2-5.7-1.6-8.1-0.4-23.1 13.4-27.6 15-49.5 22.7-5.7 1.6-13.4 4.9 2.8 14.2l109.6 65c10.6 6.1 22.3 9.3 34.5 9.3 11.8-0.4 24-3.2 34.1-9.7l328.5-189.6c21.1-12.2 34.5-34.9 34.5-59.7V321.9c0-24.3-13.4-47.5-34.5-59.6z",fill:"#689F63","p-id":"4394"}}),t._v(" "),n("path",{attrs:{d:"M614.1 641.1c-86.9 0-106-21.9-112.5-65-0.8-4.9-4.5-8.1-9.3-8.1h-42.6c-5.3 0-9.3 4.1-9.3 9.3 0 55.2 30 121.4 173.8 121.4l-0.4-0.4c103.9 0 163.6-41 163.6-112.5 0-70.6-47.9-89.7-149-103.1-101.9-13.4-112.5-20.3-112.5-44.3 0-19.5 8.9-45.9 84.4-45.9 67.8 0 92.6 14.6 102.7 60.1 1.2 4.1 4.9 7.3 9.3 7.3H755c2.4 0 5.3-0.8 6.9-2.8 1.6-2 2.8-4.5 2.4-7.3-6.9-78.4-58.9-114.9-164-114.9-93.4 0-149.4 39.4-149.4 105.6 0 71.9 55.6 91.8 145.8 100.7 107.6 10.6 116.1 26.4 116.1 47.5 0 36.5-29.3 52.4-98.7 52.4z",fill:"#689F63","p-id":"4395"}})]):t._e(),t._v(" "),"python"===e.language?n("svg",{staticClass:"icon",staticStyle:{float:"right",margin:"14px 10px 0 0"},attrs:{t:"1565963546363",viewBox:"0 0 1029 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5140",width:"40",height:"40"}},[n("path",{attrs:{d:"M610.304 7.68l38.4 8.704 31.232 11.264 25.088 12.8 19.456 13.824 14.336 14.336 10.752 14.336 6.656 14.336 4.096 12.8 1.536 11.264 1.024 8.704-0.512 5.632v227.84l-2.048 26.624-5.632 23.552-9.216 19.456-11.264 16.384-12.8 13.312-14.336 10.752-14.848 8.192-14.848 6.144-14.336 4.096-12.8 3.072-11.264 1.536-9.216 1.024H376.832l-29.696 2.048-25.088 6.144-21.504 9.216-17.408 11.776-13.824 13.824-11.264 14.848-8.704 15.36-6.144 15.872-4.096 14.848-3.072 13.824-1.536 11.264-1.024 9.216v130.56h-95.744l-9.216-1.024-11.776-3.072-13.824-5.12-14.848-7.68-15.36-11.264-15.36-15.36-14.848-19.456L28.672 678.4l-11.776-31.232-8.704-37.376L2.048 563.2 0 510.464l2.56-52.224 6.656-44.544 10.24-36.864 13.824-30.208 15.36-24.576 16.896-18.944 17.92-13.824 17.92-10.24 16.896-6.656 15.36-4.096 13.824-2.048 10.24-0.512h6.656l2.56 0.512h348.16v-35.328H266.24l-0.512-117.248-1.024-15.872 2.048-14.336 4.608-13.312 7.168-11.776 10.752-11.264 13.312-9.728 16.384-8.704 18.944-7.68 21.504-6.144L384 9.728l27.648-4.608 30.208-2.56 32.768-1.536L510.464 0l54.272 2.048 45.568 5.632zM342.016 92.16l-9.728 14.336-3.584 17.408 3.584 17.408 9.728 14.336 14.336 9.216 17.408 4.096 17.408-4.096 14.336-9.216 9.728-14.336 3.584-17.408-4.096-17.92-9.728-13.824-14.336-9.216-17.408-4.096-17.408 4.096-13.824 9.216z",fill:"#0075AA","p-id":"5141"}}),t._v(" "),n("path",{attrs:{d:"M900.096 260.608l11.776 2.56 13.824 5.12 14.848 7.68 15.36 11.264 15.36 14.848 14.848 19.968 13.824 25.088 11.776 31.232 9.216 37.376 6.144 44.544 2.048 52.224-2.56 52.224-6.656 44.544-10.24 36.864-13.824 30.208-15.36 24.576-16.896 19.456-17.92 14.336-17.92 10.24-16.896 6.656-15.36 4.096-13.824 2.048-10.24 1.024-6.656-0.512h-350.72v34.816H762.88l0.512 117.76 1.024 15.36-2.048 14.336-4.608 13.312-7.168 12.288-10.752 10.752-13.312 10.24-16.384 8.704-18.944 7.168-21.504 6.144-24.576 5.632-27.136 4.096-30.208 3.072-32.768 1.536-35.84 0.512-54.272-1.536-45.568-6.144-38.4-8.704-31.232-10.752-25.088-12.8-19.456-14.336-14.336-14.336-10.752-14.336-6.656-14.336-4.096-12.8-1.536-10.752-1.024-8.704 0.512-5.632v-227.84l2.048-27.136 5.632-23.04 9.216-19.456 11.264-16.384 12.8-13.824 14.336-10.24 14.848-8.704 14.848-6.144 13.824-4.096 12.8-2.56 11.264-1.536 9.216-1.024 5.632-0.512h249.344l29.696-2.048 25.088-6.144 21.504-8.704 17.408-11.776 14.336-13.824 11.264-14.848 8.704-15.36 6.144-15.36 4.096-14.848 3.072-13.824 1.536-11.776 1.024-9.216V259.072h89.088l6.144 0.512 6.656 1.024zM624.128 868.864L614.4 883.2l-3.584 17.408 3.584 17.408 9.728 14.336 14.336 9.728 17.408 3.584 17.408-3.584 14.336-9.728 9.728-14.336 3.584-17.408-3.584-17.408-9.728-14.336-14.336-9.728-17.408-3.584-17.408 3.584-14.336 9.728z",fill:"#FFD400","p-id":"5142"}})]):t._e(),t._v(" "),"java"===e.language?n("svg",{staticClass:"icon",staticStyle:{float:"right",margin:"14px 10px 0 0"},attrs:{t:"1572767890841",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2391","data-spm-anchor-id":"a313x.7781069.0.i2",width:"40",height:"40"}},[n("path",{staticClass:"selected",attrs:{d:"M701.72245 245.828637s-162.696653 40.05327-190.648146 134.112978c-27.951493 94.059708 107.42585 114.379856 24.790581 191.957666 0 0 71.165674-36.847202 71.165675-85.796181s-67.37258-73.73956-48.316797-120.746836c19.055783-47.097588 143.008687-119.527627 143.008687-119.527627z",fill:"#E83418","p-id":"2392","data-spm-anchor-id":"a313x.7781069.0.i1"}}),t._v(" "),n("path",{attrs:{d:"M594.2966 68.501477s64.843851 74.371742-34.950655 184.326322-185.590687 106.116329-55.948141 286.017375c0 0-141.11214-93.427526-103.5876-183.69414s234.539666-126.481633 194.486396-286.649557z",fill:"#E83418","p-id":"2393"}}),t._v(" "),n("path",{staticClass:"selected",attrs:{d:"M408.073731 545.79918s-88.324911 23.526216-88.324911 38.788905c0 15.262689 223.702253 34.318472 370.549191-7.631345 0 0-102.323235 46.375094-266.284253 46.375094s-251.06672-48.903823-15.940027-77.532654zM371.226529 645.593685s-45.110729 12.056621-45.110729 29.893196c0 17.791419 96.588438 69.269127 331.760286 12.688804 0 0-30.525378-15.894871-35.582837-21.629669 0 0-324.761124 46.42025-251.06672-20.952331zM390.282312 738.389029s-65.476033 55.270803 207.1752 20.320148l45.110729 22.894033s-73.73956 29.215857-163.328835 29.215858-175.385457-38.111567-88.957094-72.430039zM322.27755 804.497244s-81.370904 15.262689-81.370905 33.054108 125.217269 34.950655 275.812145 34.950654 291.074834-26.054946 256.756361-61.637782c0 0 15.894871 6.999162 15.894871 18.423601s-36.847202 64.843851-333.656832 64.84385-266.916435-44.478547-266.916436-44.478546 7.044318-34.363628 133.480796-45.155885z",fill:"#06509B","p-id":"2394","data-spm-anchor-id":"a313x.7781069.0.i0"}}),t._v(" "),n("path",{attrs:{d:"M303.221767 910.613573s366.710941 52.742073 523.040613-54.63862c0 0 12.056621 62.269965-228.172686 76.900471s-294.867928-22.261851-294.867927-22.261851zM708.08943 552.798342s81.370904-17.159236 81.370904 48.948979-99.162323 105.484147-99.162323 105.484147 136.641707-21.629669 136.641708-110.586762-118.850289-43.846364-118.850289-43.846364z",fill:"#06509B","p-id":"2395"}})]):t._e(),t._v(" "),n("div",{staticStyle:{padding:"14px"}},[n("span",{staticClass:"plugin_name"},[t._v(t._s(e.plugin_name))]),t._v(" "),n("div",{staticClass:"bottom"},[n("span",{staticStyle:{"font-size":"14px",color:"#999999"}},[t._v("作者:")]),t._v("\n              "+t._s(e.author)+"  \n              "),n("span",{staticStyle:{"font-size":"14px",color:"#999999"}},[t._v("版本号:")]),t._v("\n              "+t._s(e.version)+"  \n              "),n("span",{staticStyle:{"font-size":"14px",color:"#999999"}},[t._v("最近更新时间:")]),t._v("\n              "+t._s(e.updatedAt)+"\n            ")]),t._v(" "),n("div",{staticClass:"bottom",staticStyle:{height:"50px"}},[n("span",{staticClass:"paragraph"},[n("span",{staticStyle:{"font-size":"14px",color:"#999999"}},[t._v("描述:")]),t._v("\n                "+t._s(e.plugin_description)+"\n              ")])]),t._v(" "),n("div",[n("div",[t.download_plugin[e.plugin_id]&&"exception"===t.download_plugin[e.plugin_id].downloadStatus&&t.download_plugin[e.plugin_id].errLog?n("span",{staticStyle:{"font-size":"12px",color:"#F56C6C",float:"left","margin-bottom":"-15px"}},[t._v(t._s(t.download_plugin[e.plugin_id].errLog))]):t._e(),t._v(" "),t.download_plugin[e.plugin_id]?n("el-progress",{staticClass:"download-progress",attrs:{percentage:t.download_plugin[e.plugin_id].downloadRate,status:t.download_plugin[e.plugin_id].downloadStatus}},[t._v(t._s(t.download_plugin[e.plugin_id].downloadRate)+"%")]):t._e(),t._v(" "),"local"!==t.tabName||e.is_uiauto_base_integration?t._e():n("el-button",{staticStyle:{float:"right","margin-left":"10px"},attrs:{type:"danger"},on:{click:function(n){return t.deletePlugin(e)}}},[t._v("删除")]),t._v(" "),n("el-button",{staticStyle:{cursor:"pointer",float:"right"},attrs:{plain:!t.plugin_status[e.plugin_id].needUpdate,type:t.plugin_status[e.plugin_id].needUpdate?"primary":"info",disabled:!t.plugin_status[e.plugin_id].needUpdate,loading:!!t.download_plugin[e.plugin_id]&&t.download_plugin[e.plugin_id].isDownloading},on:{click:function(n){return t.singleDownload(e)}}},[t._v(t._s(t.plugin_status[e.plugin_id].buttonText))])],1)])])])],1)})),0),t._v(" "),n("div",{staticStyle:{width:"100%","margin-top":"6px"}},[n("center",[n("pagination",{staticStyle:{display:"inline-block"},attrs:{total:t.total,page:t.listQuery.pageIndex,limit:t.listQuery.pageSize},on:{"update:page":function(e){return t.$set(t.listQuery,"pageIndex",e)},"update:limit":function(e){return t.$set(t.listQuery,"pageSize",e)},pagination:t.getList}})],1)],1)])])},s=[],l=(n("7f7f"),n("7514"),n("6762"),n("2fdb"),n("96cf"),n("3b8d")),r=n("2ef0"),u=n.n(r),c=(n("4328"),n("9448")),d=n("333d"),p=n("f22f");n("a481"),n("6b54"),n("7618"),n("28a5");function g(t,e){var n=h(t),i=h(e);return n!=i&&(n>i||!(n<i)&&void 0)}function h(t){for(var e=t.split(/\./),n=["","0","00","000","0000"],i=n.reverse(),a=0;a<e.length;a++){var o=e[a].length;e[a]=i[o]+e[a]}var s=e.join("");return s}var f=n("2b0e"),_=new f["default"],m=new f["default"],v=window.require("fs"),b=window.require("path"),y=window.require("fs-extra"),w=(window.require("axios"),window.require("electron").ipcRenderer,n("1e55")),S=w.allDownload,x=w.executeDownload,k={name:"PluginList",components:{Pagination:d["a"]},data:function(){return{list:[],total:0,searchName:"",searchStatus:"全部",listQuery:{pageIndex:1,pageSize:6},loading:!0}},mounted:function(){var t=this;m.$on("getdownloadAllPlugin",(function(e){t.getAllDownloadParams()}))},computed:{tabName:function(){return this.$store.state.plugin.tab},refresh:function(){return this.$store.state.plugin.refresh},download_plugin:function(){return this.$store.state.plugin.pluginDownload},plugin_status:function(){return this.$store.state.plugin.pluginStatus}},watch:{tabName:function(){this.listQuery={pageIndex:1,pageSize:6},this.total=0,this.searchStatus="全部",this.searchName="",this.getList()},refresh:function(t,e){this.getList()}},created:function(){this.getList()},methods:{singleDownload:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("python"!==e.language){t.next=7;break}if(!this.$store.state.plugin.has_python_downloading){t.next=6;break}return this.$message({message:"当前已有python插件在下载，请稍候再下载！",type:"error"}),t.abrupt("return",!1);case 6:this.$store.commit("plugin/MARK_PYTHON_DOWNLOADING",!0);case 7:x(e).then((function(t){})).catch((function(t){}));case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getAllDownloadParams:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,Object(c["c"])({}).then((function(t){var i=t.data,a=b.join(b.resolve(),"/public/base_integration/"),o=v.readdirSync(a),s=p["default"].pluginsPath+"/",l=u.a.difference(v.readdirSync(s),["list.json","npm_i.sh"]);l=u.a.concat(l,o),u.a.remove(i,(function(t){var n="";return n=v.existsSync(b.normalize(a+t.plugin_id+"/package.json"))?b.normalize(a+t.plugin_id+"/package.json"):b.normalize(p["default"].pluginsPath+"/"+t.plugin_id+"/package.json"),u.a.includes(l,t.plugin_id)&&!1===g(t.version,y.readJsonSync(n).version)||!!e.download_plugin[t.plugin_id]&&!0===e.download_plugin[t.plugin_id]["isDownloading"]})),u.a.map(i,(function(t){return t["latestVersion"]=t.version})),u.a.each(i,(function(t,e){var i="";if(i=v.existsSync(b.normalize(a+t.plugin_id+"/package.json"))?b.normalize(a+t.plugin_id+"/package.json"):b.normalize(p["default"].pluginsPath+"/"+t.plugin_id+"/package.json"),v.existsSync(i)){var o=y.readJsonSync(i);t.is_uiauto_base_integration=!!o.is_uiauto_base_integration}else t.is_uiauto_base_integration=!1;var s={plugin_id:t.plugin_id,downloadRate:0,downloadStatus:"text",isWaitDownload:!0,isDownloading:!0};n.$store.commit("plugin/PLUGIN_DOWNLOAD",s);var l={plugin_id:t.plugin_id,needUpdate:!0,buttonText:"等待下载"};n.$store.commit("plugin/PLUGIN_STATUS",l)})),setTimeout((function(){S(i,0)}),0)}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getList:function(){u.a.includes(["下载","更新"],this.searchStatus)?this.handleFilter():(this.loading=!0,this.list=[],"all"===this.tabName?this.getWebPlugins():"local"===this.tabName&&this.getLocalPlugins())},handleSeach:function(){this.listQuery={pageIndex:1,pageSize:6},this.getList()},getWebPlugins:function(){var t=this;return new Promise((function(e,n){var i=b.join(b.resolve(),"/public/base_integration/"),a=p["default"].pluginsPath+"/";""!==t.searchName?t.listQuery.where={$or:[{plugin_id:{$like:"%"+[t.searchName]+"%"}},{plugin_description:{$like:"%"+t.searchName+"%"}}]}:t.listQuery.where={},Object(c["b"])(t.listQuery).then((function(e){var n=e.data.list;u.a.map(n,(function(e){var n=a+e.plugin_id+"/package.json";if(v.existsSync(n)||(n=i+e.plugin_id+"/package.json"),"uiauto_logMonitor"===e.plugin_id&&(e.is_uiauto_base_integration=!0),v.existsSync(n)){var o=y.readJsonSync(n);e.is_uiauto_base_integration=!!o.is_uiauto_base_integration,e.latestVersion=e.version;var s={plugin_id:e.plugin_id,needUpdate:!!g(e.version,o.version),buttonText:t.download_plugin[e.plugin_id]?"exception"===t.download_plugin[e.plugin_id]["downloadStatus"]?"重新下载":!0===t.download_plugin[e.plugin_id]["isWaitDownload"]?"等待下载":"正在下载":g(e.version,o.version)?"更新":"已安装最新版本"};t.$store.commit("plugin/PLUGIN_STATUS",s)}else{e.latestVersion=e.version;var l={plugin_id:e.plugin_id,needUpdate:!0,buttonText:t.download_plugin[e.plugin_id]?"exception"===t.download_plugin[e.plugin_id]["downloadStatus"]?"重新下载":!0===t.download_plugin[e.plugin_id]["isWaitDownload"]?"等待下载":"正在下载":"下载"};t.$store.commit("plugin/PLUGIN_STATUS",l)}})),t.list=n,t.total=e.data.total,t.loading=!1})).catch((function(e){t.loading=!1,console.warn("err"),console.warn(e)}))}))},getLocalPlugins:function(){var t=this,e=b.join(b.resolve(),"/public/base_integration/"),n=v.readdirSync(e),i=p["default"].pluginsPath+"/",a=u.a.difference(v.readdirSync(i),["list.json","npm_i.sh"]);a=u.a.concat(a,n);var o=[],s={};s=""!==this.searchName?{$or:[{plugin_id:{$like:"%"+[this.searchName]+"%"}},{plugin_description:{$like:"%"+this.searchName+"%"}}]}:{plugin_id:a},Object(c["c"])(s).then((function(n){var s=n.data;""!==t.searchName&&(a=u.a.pullAll(a,u.a.difference(a,u.a.map(s,"plugin_id")))),u.a.map(a,(function(n){var a=i+n+"/package.json";if(v.existsSync(a)||(a=e+n+"/package.json"),v.existsSync(a)){var l=y.readJsonSync(a),r=u.a.find(s,(function(t){return t.plugin_id==l.id}));"uiauto_logMonitor"===l.id&&(l.is_uiauto_base_integration=!0),o.push({plugin_id:l.id,plugin_name:l.name,author:l.author,version:l.version,language:l.language,latestVersion:r?r.version:l.version,plugin_description:l.description,attachment_md5:r?r.attachment_md5:null,is_uiauto_base_integration:!!l.is_uiauto_base_integration});var c={plugin_id:l.id,needUpdate:!!t.download_plugin[l.id]||!!g(r?r.version:l.version,l.version),buttonText:t.download_plugin[l.id]?"exception"===t.download_plugin[l.id]["downloadStatus"]?"重新下载":!0===t.download_plugin[l.id]["isWaitDownload"]?"等待下载":"正在下载":g(r?r.version:l.version,l.version)?"更新":"已安装最新版本"};t.$store.commit("plugin/PLUGIN_STATUS",c)}})),t.list=u.a.chunk(o,t.listQuery.pageSize)[t.listQuery.pageIndex-1],t.total=o.length,t.loading=!1})).catch((function(e){console.warn(e),t.loading=!1}))},deletePlugin:function(t){var e=this;this.$confirm("此操作将永久删除该插件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var n=e.$loading({text:"正在删除",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)",target:"#"+t.plugin_id}),i=p["default"].pluginsPath+"/",a=u.a.difference(v.readdirSync(i),["list.json"]),o=i+a[u.a.indexOf(a,t.plugin_id)]+"/";if(v.existsSync(o))try{y.emptyDirSync(o),v.rmdirSync(o),n.close(),e.getList(),e.$message({showClose:!0,message:"删除成功",type:"success"})}catch(s){n.close(),e.$message({showClose:!0,message:s,type:"error"})}else n.close(),e.$message({showClose:!0,message:"删除失败，插件已被删除或文件不合法",type:"error"})})).catch((function(){e.$message({type:"info",message:"已取消删除"})}))},handleFilterInit:function(){this.listQuery.pageIndex=1,this.handleFilter()},handleFilter:function(){var t=this;if(u.a.includes(["下载","更新"],this.searchStatus)){var e=[],n=[],i=u.a.concat(u.a.difference(v.readdirSync("".concat(p["default"].pluginsPath,"/")),["list.json","npm_i.sh",".DS_Store"]),v.readdirSync(b.join(b.resolve(),"/public/base_integration/")));Object(c["c"])({}).then((function(a){u.a.each(a.data,(function(e){var a="".concat(p["default"].pluginsPath,"/").concat(e.plugin_id,"/package.json"),o=b.join(b.resolve(),"/public/base_integration/");v.existsSync(a)||(a=o+e.plugin_id+"/package.json"),u.a.includes(["uiauto_executor","uiauto_uiselector","uiauto_logMonitor"],e.plugin_id)?e.is_uiauto_base_integration=!0:e.is_uiauto_base_integration=!1;var s=u.a.includes(i,e.plugin_id)?y.readJsonSync(a).version:null,l={plugin_id:e.plugin_id,needUpdate:"下载"===t.searchStatus||!!g(e.version,s||e.version),buttonText:u.a.includes(i,e.plugin_id)?g(e.version,s||e.version)?"更新":"已安装最新版本":"下载"};n.push(l),t.$store.commit("plugin/PLUGIN_STATUS",l)})),"下载"===t.searchStatus?u.a.each(n,(function(n){if("下载"===n.buttonText){var i=u.a.find(a.data,{plugin_id:n.plugin_id});""!==t.searchName?i&&(i.plugin_id.indexOf(t.searchName)>-1||i.plugin_description&&i.plugin_description.indexOf(t.searchName)>-1)&&e.push({plugin_id:i.plugin_id,plugin_name:i.plugin_name,author:i.author,version:i.version,latestVersion:i.version,language:i.language,plugin_description:i.plugin_description,attachment_md5:i.attachment_md5,is_uiauto_base_integration:i.is_uiauto_base_integration,updatedAt:i.updatedAt}):e.push({plugin_id:i.plugin_id,plugin_name:i.plugin_name,author:i.author,version:i.version,latestVersion:i.version,language:i.language,plugin_description:i.plugin_description,attachment_md5:i.attachment_md5,is_uiauto_base_integration:i.is_uiauto_base_integration,updatedAt:i.updatedAt})}})):"更新"===t.searchStatus&&u.a.each(n,(function(n){if("更新"===n.buttonText){var i=u.a.find(a.data,{plugin_id:n.plugin_id});""!==t.searchName?i&&(i.plugin_id.indexOf(t.searchName)>-1||i.plugin_description&&i.plugin_description.indexOf(t.searchName)>-1)&&e.push({plugin_id:i.plugin_id,plugin_name:i.plugin_name,author:i.author,version:i.version,latestVersion:i.version,language:i.language,plugin_description:i.plugin_description,attachment_md5:i.attachment_md5,is_uiauto_base_integration:i.is_uiauto_base_integration,updatedAt:i.updatedAt}):e.push({plugin_id:i.plugin_id,plugin_name:i.plugin_name,author:i.author,version:i.version,latestVersion:i.version,language:i.language,plugin_description:i.plugin_description,attachment_md5:i.attachment_md5,is_uiauto_base_integration:i.is_uiauto_base_integration,updatedAt:i.updatedAt})}})),t.list=u.a.chunk(e,t.listQuery.pageSize)[t.listQuery.pageIndex-1],t.total=e.length}))}else this.listQuery.pageIndex=1,this.getList()}}},N=k,P=(n("b70d"),n("2877")),C=Object(P["a"])(N,o,s,!1,null,"10128fa0",null),$=C.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"navbar"},[n("breadcrumb",{staticClass:"breadcrumb-container"}),t._v(" "),n("plugin-tabs",{staticClass:"select"}),t._v(" "),n("div",{staticClass:"right-menu"},[n("uploadPlugin",{staticClass:"right-menu-item",staticStyle:{"margin-right":"15px"}}),t._v(" "),n("downloadPlugin",{staticClass:"right-menu-item"})],1)],1)},z=[],I=(n("386d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-tabs",{model:{value:t.tabActiveName,callback:function(e){t.tabActiveName=e},expression:"tabActiveName"}},[n("el-tab-pane",{attrs:{label:"本地",name:"local"}}),t._v(" "),n("el-tab-pane",{attrs:{label:"全部",name:"all"}})],1)],1)}),L=[],j={name:"PluginTabs",components:{},data:function(){return this.$store.state.plugin.tab="all",{}},computed:{tabActiveName:{get:function(){return this.$store.state.plugin.tab},set:function(t){return this.$store.state.plugin.tab=t,t}}},watch:{tabActiveName:function(){}},mounted:function(){},methods:{}},T=j,O=Object(P["a"])(T,I,L,!1,null,"516f5602",null),E=O.exports,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{staticClass:"button",attrs:{type:"primary"},on:{click:function(e){t.dialogSelectVisible=!0}}},[t._v("导入插件")]),t._v(" "),n("el-dialog",{attrs:{title:"导入插件",visible:t.dialogSelectVisible,width:"30%",center:""},on:{"update:visible":function(e){t.dialogSelectVisible=e},close:t.close}},[n("el-dialog",{attrs:{width:"25%",top:"25vh",visible:t.uploadLoading,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,"append-to-body":"",center:""},on:{"update:visible":function(e){t.uploadLoading=e}}},[n("span",{staticClass:"dialog-title",attrs:{slot:"title"},slot:"title"},[t._v(t._s(t.uploadTitle))]),t._v(" "),n("div",{staticClass:"loading"},[n("i",{staticClass:"el-icon-loading uploadLoading"})])]),t._v(" "),n("el-input",{attrs:{autocomplete:"off",readonly:!0},model:{value:t.filePath,callback:function(e){t.filePath=e},expression:"filePath"}},[n("template",{slot:"append"},[n("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.productionUploadUrl,headers:t.headers,data:t.uploadData,"on-change":t.fileChange,"on-success":t.uploadSuccess,"on-error":t.uploadError,"before-upload":t.beforeupload,"show-file-list":!1,"auto-upload":!1}},[n("el-button",{attrs:{type:"primary"}},[t._v("选择文件")])],1)],1)],2),t._v(" "),n("center",[n("el-checkbox",{staticClass:"checkbox",model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[t._v("是否为上传为私有插件")])],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{color:"#1890ff",border:"1px solid #1890ff"},on:{click:function(e){t.dialogSelectVisible=!1}}},[t._v("取 消")]),t._v(" "),n("el-button",{staticStyle:{color:"white"},attrs:{type:"primary",disabled:""===t.filePath},on:{click:function(e){return t.upload()}}},[t._v("导 入")])],1)],1)],1)},F=[],U=(n("f559"),window.require("electron").ipcRenderer,window.require("electron").remote.app,window.require("fs-extra")),M=window.require("fs"),V=window.require("crypto"),Q=window.require("decompress"),q=window.require("path"),R=n("95a9"),J=R.nodeInit,G=R.pythonInit,B={data:function(){return{productionUploadUrl:p["default"].serverUrl+"/api/v1/plugins/upload",dialogSelectVisible:!1,uploadLoading:!1,filePath:"",headers:null,uploadData:null,checked:!1,uploadTitle:""}},computed:{},watch:{},created:function(){},methods:{close:function(){this.filePath="",this.checked=!1,this.headers=null,this.uploadData=null},fileChange:function(t,e){this.filePath=t.raw.path,console.log(this.filePath);var n=M.readFileSync(this.filePath),i=V.createHash("md5").update(n).digest("hex");console.log(i),this.headers={Authorization:localStorage.getItem("access_token")},this.uploadData={private:this.checked,md5:i},console.log(this.uploadData)},beforeupload:function(t){console.log("beforeupload"),console.log(t.path),this.uploadTitle="正在上传",this.uploadLoading=!0},upload:function(){this.$refs.upload.submit()},uploadSuccess:function(t,e){console.log(e),this.uploadTitle="正在安装",this.installPlugin()},uploadError:function(t,e){this.uploadLoading=!1,this.dialogSelectVisible=!1,this.uploadTitle="",this.$message({showClose:!0,message:"上传失败",type:"error"})},installPlugin:function(){var t=this,e=q.normalize(p["default"].pluginsPath+"/../plugins_temp/"),n=p["default"].pluginsPath+"/";M.existsSync(e)||M.mkdirSync(e),M.existsSync(n)||M.mkdirSync(n),Q(this.filePath,e,{filter:function(t){var e=!0;return t.path.startsWith("__MACOSX")&&(e=!1),e}}).then((function(i){var a=i[0].path.split("/")[0],o=e+a,s=q.normalize(o+"/package.json");if(M.existsSync(o)&&M.existsSync(s)&&U.readJsonSync(s).id===a&&U.readJsonSync(s).version&&U.readJsonSync(s).author&&U.readJsonSync(s).language){try{var l=U.readJsonSync(s);if(l.source="local",U.writeJsonSync(s,l),M.existsSync(n+a)&&(U.emptyDirSync(n+a),M.rmdirSync(n+a)),U.moveSync(o,n+a,{overwrite:!0}),M.existsSync(q.normalize(n+a+"/node_modules")))t.importSuccess();else if("nodejs"===l.language)J(n+a).then((function(e){t.importSuccess()})).catch((function(e){t.importError(e,n+a)}));else if("python"===l.language)G(n+a).then((function(e){t.importSuccess()})).catch((function(e){t.importError(e,n+a)}));else{var r="文件格式有误，language需为一种有效语言";t.importError(r,n+a)}}catch(r){t.importError(r,n+a)}U.emptyDirSync(o),M.rmdirSync(o)}else t.importError("包内文件不合法，请检查包内容后再试！",o)})).catch((function(e){t.$message({showClose:!0,message:"文件解压失败",type:"error"})}))},importSuccess:function(){this.uploadLoading=!1,this.dialogSelectVisible=!1,this.uploadTitle="",this.$message({showClose:!0,message:"导入成功！",type:"success"}),this.$store.dispatch("plugin/refreshPugin")},importError:function(t,e){this.uploadLoading=!1,this.dialogSelectVisible=!1,this.uploadTitle="",e&&(U.emptyDirSync(e),M.rmdirSync(e)),this.$message({showClose:!0,message:t,type:"error"})}}},W=B,H=(n("7344"),Object(P["a"])(W,D,F,!1,null,"3dcc6af7",null)),X=H.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-button",{staticClass:"button",attrs:{type:"primary",loading:t.allDownloadStatus},on:{click:function(e){return t.download()}}},[t._v(t._s(!0===t.allDownloadStatus?"正在下载":"全部下载"))])],1)},K=[],Z=(window.require("path"),{data:function(){return{}},computed:{allDownloadStatus:function(){return this.$store.state.plugin.has_all_plugin_downloading}},created:function(){},methods:{download:function(){this.$store.commit("plugin/ALL_PLUGIN_DOWNLOADING",!0),m.$emit("getdownloadAllPlugin",!0)}}}),tt=Z,et=(n("9c1d3"),Object(P["a"])(tt,Y,K,!1,null,"6e966954",null)),nt=et.exports,it=n("6350"),at={name:"PluginNavbar",components:{uploadPlugin:X,downloadPlugin:nt,pluginTabs:E,Breadcrumb:it["a"]},data:function(){return{search:"",show:!1}},methods:{searchClick:function(){console.log("searchClick"),this.show=!this.show,this.show&&this.$refs.headerSearchSelect&&this.$refs.headerSearchSelect.focus()},addSearch:function(){var t=this.search.replace(/\s+/g,"");_.$emit("getSearchParameters",{searchName:t})},tabClick:function(t,e){console.log("tabClick"),console.log(t,e),console.log(this.tabActiveName)}}},ot=at,st=(n("c3f0"),Object(P["a"])(ot,A,z,!1,null,"51e1664a",null)),lt=st.exports,rt={name:"Plugins",components:{PluginList:$,PluginNavbar:lt},data:function(){return{}},created:function(){},methods:{},destroyed:function(){_.$off("getSearchParameters"),m.$off("getdownloadAllPlugin")}},ut=rt,ct=(n("d2a8"),Object(P["a"])(ut,i,a,!1,null,"025424c1",null));e["default"]=ct.exports},"5dbc":function(t,e,n){var i=n("d3f4"),a=n("8b97").set;t.exports=function(t,e,n){var o,s=e.constructor;return s!==n&&"function"==typeof s&&(o=s.prototype)!==n.prototype&&i(o)&&a&&a(t,o),t}},6981:function(t,e,n){},7344:function(t,e,n){"use strict";var i=n("b3c2"),a=n.n(i);a.a},7514:function(t,e,n){"use strict";var i=n("5ca1"),a=n("0a49")(5),o="find",s=!0;o in[]&&Array(1)[o]((function(){s=!1})),i(i.P+i.F*s,"Array",{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},7618:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var i=n("5d58"),a=n.n(i),o=n("67bb"),s=n.n(o);function l(t){return l="function"===typeof s.a&&"symbol"===typeof a.a?function(t){return typeof t}:function(t){return t&&"function"===typeof s.a&&t.constructor===s.a&&t!==s.a.prototype?"symbol":typeof t},l(t)}},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"8b97":function(t,e,n){var i=n("d3f4"),a=n("cb7c"),o=function(t,e){if(a(t),!i(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,i){try{i=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),i(t,[]),e=!(t instanceof Array)}catch(a){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:i(t,n),t}}({},!1):void 0),check:o}},9093:function(t,e,n){var i=n("ce10"),a=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,a)}},"912f":function(t,e,n){},"9c1d3":function(t,e,n){"use strict";var i=n("25f8"),a=n.n(i);a.a},a38a:function(t,e,n){},aa77:function(t,e,n){var i=n("5ca1"),a=n("be13"),o=n("79e5"),s=n("fdef"),l="["+s+"]",r="​",u=RegExp("^"+l+l+"*"),c=RegExp(l+l+"*$"),d=function(t,e,n){var a={},l=o((function(){return!!s[t]()||r[t]()!=r})),u=a[t]=l?e(p):s[t];n&&(a[n]=u),i(i.P+i.F*l,"String",a)},p=d.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(c,"")),t};t.exports=d},b3c2:function(t,e,n){},b70d:function(t,e,n){"use strict";var i=n("912f"),a=n.n(i);a.a},c3f0:function(t,e,n){"use strict";var i=n("31a0"),a=n.n(i);a.a},c5f6:function(t,e,n){"use strict";var i=n("7726"),a=n("69a8"),o=n("2d95"),s=n("5dbc"),l=n("6a99"),r=n("79e5"),u=n("9093").f,c=n("11e9").f,d=n("86cc").f,p=n("aa77").trim,g="Number",h=i[g],f=h,_=h.prototype,m=o(n("2aeb")(_))==g,v="trim"in String.prototype,b=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():p(e,3);var n,i,a,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+e}for(var s,r=e.slice(2),u=0,c=r.length;u<c;u++)if(s=r.charCodeAt(u),s<48||s>a)return NaN;return parseInt(r,i)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(m?r((function(){_.valueOf.call(n)})):o(n)!=g)?s(new f(b(e)),n,h):b(e)};for(var y,w=n("9e1e")?u(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;w.length>S;S++)a(f,y=w[S])&&!a(h,y)&&d(h,y,c(f,y));h.prototype=_,_.constructor=h,n("2aba")(i,g,h)}},d2a8:function(t,e,n){"use strict";var i=n("6981"),a=n.n(i);a.a},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);